<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Audio Player Editor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #f4f5f7;
      margin: 0;
      padding: 24px;
    }

    h1 {
      margin-bottom: 16px;
    }

    .editor {
      display: grid;
      grid-template-columns: 320px 1fr;
      gap: 24px;
    }

    .panel {
      background: #fff;
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 4px 16px rgba(0,0,0,.08);
    }

    label {
      display: block;
      font-size: 14px;
      margin-top: 12px;
    }

    input, select {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    button {
      margin-top: 16px;
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: none;
      background: #6c5ce7;
      color: #fff;
      font-size: 15px;
      cursor: pointer;
    }

    button.secondary {
      background: #dfe6e9;
      color: #2d3436;
    }

    iframe {
      width: 100%;
      height: 340px;
      border: none;
      background: transparent;
    }

    textarea {
      width: 100%;
      height: 160px;
      margin-top: 12px;
      padding: 10px;
      font-family: monospace;
      font-size: 13px;
    }

    .preview-box {
      background: repeating-conic-gradient(#ddd 0% 25%, #eee 0% 50%) 50% / 20px 20px;
      padding: 24px;
      border-radius: 12px;
    }
  </style>
</head>
<body>

<h1>üéß Audio Player Editor</h1>

<div class="editor">

  <!-- SETTINGS -->
  <div class="panel">
    <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–µ–µ—Ä–∞</h3>

    <label>GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
      <input id="repo" value="EnglishTeacherOlgaKutsepalova/audioplayer">
    </label>

    <label>–ü–∞–ø–∫–∞ —Å –∞—É–¥–∏–æ
      <input id="path" value="audio">
    </label>

    <label>–û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç
      <input type="color" id="primary" value="#8a5cff">
    </label>

    <label>–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
      <select id="lang">
        <option value="ru">–†—É—Å—Å–∫–∏–π</option>
        <option value="en">English</option>
      </select>
    </label>

    <label>–í—ã—Å–æ—Ç–∞ –ø–ª–µ–µ—Ä–∞ (px)
      <input id="height" value="320">
    </label>

    <button onclick="updatePreview()">–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</button>
    <button class="secondary" onclick="generateCode()">–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥</button>
  </div>

  <!-- PREVIEW -->
  <div class="panel">
    <h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h3>

    <div class="preview-box">
      <iframe id="preview"></iframe>
    </div>

    <h3>–ö–æ–¥ –¥–ª—è Genially</h3>
    <textarea id="code" readonly></textarea>
  </div>

</div>

<script>
  const basePlayerUrl = 'https://englishteacherolgakutsepalova.github.io/audioplayer/player/player.html';

  function buildUrl() {
    const repo = document.getElementById('repo').value.trim();
    const path = document.getElementById('path').value.trim();
    const primary = document.getElementById('primary').value.replace('#','%23');
    const lang = document.getElementById('lang').value;

    return `${basePlayerUrl}?repo=${repo}&path=${path}&primary=${primary}&lang=${lang}`;
  }

  function updatePreview() {
    const iframe = document.getElementById('preview');
    iframe.src = buildUrl();
  }

  function generateCode() {
    const height = document.getElementById('height').value;
    const url = buildUrl();

    document.getElementById('code').value = `<iframe\n  src="${url}"\n  width="100%"\n  height="${height}"\n  frameborder="0"\n  allow="autoplay">\n</iframe>`;
  }

  updatePreview();
</script>

</body>
</html>
